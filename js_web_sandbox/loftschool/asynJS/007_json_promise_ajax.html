<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Title</title> <!-- Node type: element -->
    </head>
    <body>
    <button id="myButton">Load file</button>
    <div id="container"></div>
    <script>
        function sendAjax(url) {

            return new Promise((resolve, reject) => {
                let xhr = new XMLHttpRequest();
                // указывая свойство responseType - нет необходимости использовать JSON.parse
                // ответ будет приходить в json
                xhr.responseType = 'json';
                xhr.open('GET', url);
                xhr.addEventListener('load', () => {
                    // в resolve можно передать только один параметр
                    //resolve(xhr.responseText);
                    resolve(xhr.response);
                });
                xhr.addEventListener('error', () => {
                    reject();
                });
                xhr.send();
            });
        }

        myButton.addEventListener('click', () => {
            sendAjax('list.json').then(
                // responseText - то, что передали в resolve - xhr.responseText
                // то, что потом пришло в then
                /*
                responseText => {
                    console.log('file is loaded!!!111oneoneone');
                    //container.innerText = responseText;
                    // key - value в двойных кавычках
                    //let result = JSON.parse(responseText);
                    console.log(responseText);
                */


                response => {
                    //console.log(response);
                    const itemSort = (a,b) => {
                        a = a.name;
                        b = b.name;
                        return predicate = a > b ? 1 : a < b ? -1 : 0;
                    }
                    response.sort(itemSort)
                    /*
                        for({name} of response) {
                            let div = document.createElement('div');
                            div.innerText = name;
                            container.appendChild(div);
                        }
                    */
                    // destructive assignment


                   response.map(({name}) => {
                       let div = document.createElement('div');
                       div.innerText = name;
                       container.appendChild(div);
                   });
                });
        });
    </script>
    </body>
</html>
